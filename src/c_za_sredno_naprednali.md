# C за средно напреднали

[Линк към презентацията](https://docs.google.com/presentation/d/1MkoXOHJoVKbnyJCmk1edoLNDS6idsUoU/edit?usp=sharing&ouid=101404069411555549635&rtpof=true&sd=true)

## Оператори за съкратен запис

### Кои са операторите за съкратен запис?

`++`, `--`, `+=` , `-=`, `*=`, `/=`, `%=` и т.н.

### Какъв е резултатът на оператор за съкратен запис?

Резултатът от операцията

### Какъв е страничният ефект на операторите за съкратен запис?

Операнда присвоява резултата на операцията

### Каква е асоциативността на операторите за съкратен запис?

- Префиксни и Постфиксни `++`/`--` – отляво надясно
- „`=`“ – отдясно наляво

### Какъв е приоритета на операторите за съкратен запис?

1. Префиксни `++`/`--`
2. Постфиксни `++`/`--`
3. Тези, които имат `=`

## `for` клауза

### На какъв тип цикъл съответства for клаузата?

Цикъл с префиксно условие

### Каква е целта на for клаузата?

Да събере начало, условие и край на едно място

### Какъв е синтаксиса на for клаузата?

```c
for ( <начало>; <условие>; <край> )
<клауза или блок>
```

### Какво ще се изпълни след continue във for клауза?

`<край>` и после `<условие>`

### Каква е видимостта на променливи, декларирани във for клауза?

Само в клаузата

## `goto` клауза

### На каква синтактична конструкция може да се постави етикет?

На всяка клауза

### Какво е действието на `goto`?

Преход към произволен етикет / клауза

### Може ли `goto` да отиде в друга функция?

Не

### На какво в блок схемите съответства `goto`?

Стрелка

## `break` клауза

### Какво е действието на `break`?

Незабавен изход от цикъла.

### Къде продължава изпълнението след `break`?

След цикъла.

### За кой цикъл се отнася `break` при няколко вложени цикъла?

Най-вътрешния.

## `continue` клауза

### Какво е действието на `continue` клауза?

Пропуска остатъка на тялото на цикъла.

### Къде продължава изпълнението след `continue`?

След тялото на цикъла.

### За кой цикъл се отнася `continue` при няколко вложени цикъла?

Най-вътрешния.

## Декларации

### Как изглежда деклaрация в общ вид?

```c
[<типови модификатори>] [<типов спецификатор>] <декларатор>[=<инициализатор],
[<декларатор>=<инициализатор>];
```

### Кои са задължителните елементи от декларационна клауза на ниво файл?

- Декларатор
- `;`

### Какъв е приоритета на оператор `()`?

Като постфиксните.

### Какво е декларатор?

Идентификатор с приложени 0 или няколко оператора. Могат да се ползват скоби за
уточняване на структурата на типа.

### Как се прави декларатор на функция?

Постфиксен оператор `()`

```c
<идентификатор>(<списък с параметри>)
```

### Какво указва ключова дума `const`?

Непроменлива променлива (т.е. константа).

## Скаларни и агрегатни променливи

### Кои променливи са скаларни?

Тези, които се обработват с една операция.

### Какъв е типа на скаларните променливи?

`int`, `char`, `float`, `double`, ...

### Какво е агрегатната променлива?

Голям брой скаларни променливи в една.

### Защо се използват агрегатните променливи?

За да съхраняваме заедно няколко подобни скаларни променливи.

### Какво е масив?

Агрегатна структура, в която вложените променливи са в един тип и се идентифицират с индекси.

### Как се идентифицират съставните променливи на масив?

С индекси – поредни неотрицателни числа.

### Могат ли индексите на масив да са променливи изрази?

Да.

## Масиви

### С кой оператор се достъпват елементи на масив?

Постфиксен `[]`

### Как се инициaлизира масив?

Списък от стойности в `{}`

### Кога може да не се дава размера на масив?

Когато има даден списък от стойности.

### Какъв тип масив представлява низовия литерал?

`char[]`

## Операции с памет

### Как се взима адрес на променлива?

С префиксен `&`

### Как се достъпва променлива по адрес?

С префиксен `*`

### Какъв е типа на адреса променлива от тип `int`?

`int *`

### Как се нарича променлива съдържаща адрес?

Указател.

### Как се взима размера на променлива?

Префиксен `sizeof`

### В какви единици са измерва размерът на променливи?

`char`-ове

### Какъв е приоритета на оператор `sizeof`?

Като префиксните

## Указатели

### Как се прави декларатор за указател?

```c
<тип> *<декларатор> [=<израз>];
```

### Как се инициализира указател?

С адрес (`&x`).

### Как може функция да променя променливи на извикващата функция?

Като извикващата функция ги предаде с указател / по адрес.

## Адресна аритметика

### Кои операции са общи за масиви и указатели?

Всички (без тези, които променят адреса на началото на масива).

### Какво извършва операцията `[]`?

`a[x] <=> *(a + x) <=> x[a]`

### Какъв е резултатът от събиране на масив с число?

Указател / адрес.

### При предаване на масив като параметър как се държи формалната променлива?

Държи се като указател към началото на масива.

## Низове

### Какво представляват низовете в С?

Масив от `char`

### Как се определя дължината на низ?

Броя символи от първия до терминиираща нула.

### Кой заделя паметта за низовете?

Или линкерът в изпълнимия файл, или програмистът в кода си.

### Как се предават низове на функции?

Като указател към първия символ

## Оператор `,`

### Какво е действието на оператор `,`?

Слепва 2 израза в 1 клауза.

### Какъв е приоритетът на оператор `,`?

Най-нисък.

### Каква е асоциативността на оператор `,`?

Лява

## Макроси

### За какво се използват макросите?

Заместване на текст в сорса, вместо да го повтаряме.

### Как се дефинира макрос?

```c
#define <име>[( <параметри> )][<тяло>]
```

### Как се различава макрос с параметри от такъв без параметри?

Макрос без параметри се употребява без `()`.

### Какво прави оператор `#`?

Взима име на параметър и замества на свое място експанзията на параметъра, превърната в низов литерал, като го затваря в `""` и escape-ва всички специални символи, като `"` със `\` преди тях.

### Какво прави оператор `##`?

Взима текст отляво, име на параметър отдясно и слепва текста с експанзията на параметъра без интервали м/у тях.

## Функции с променлив брой параметри

### Къде може да стои `…`?

Задължително след 1 формален параметър.

### Кои макроси са необходими за достъп до променлив брой параметри?

`va_start`, `va_arg`, `va_end`.

### Кой проверява коректността на параметрите подадени на `…`?

Никой / Програмиста трябва.

### Как се достъпват параметри, предадени с `…`?

```c
va_list ap;
va_start(ap, <последен параметър преди ...>)
va_arg(ap, <тип>); // <-
```

## Функция връщаща променлив тип

### Кой тип се използва за връщане на неизвестен тип от функция?

`void *`

### Как се достъпват променливите от неизвестен тип?

Преобразуват се в известен тип (пр. `void *` → `char *`)

## Използване на параметри на командния ред

### Напишете истинския прототип на main.

```c
int main(int argc, char *argv[]);
```

### Какво се съдържа в `argv[0]`?

Първия параметър от командния ред, с който е извикана програмата ни.

Най-често това е името или пътя до изпълнимия файл, но може и да няма нищо общо, особено в Unix.

### Как се разделят параметрите на командния ред при извикването на програмата?

С интервали, но зависи от системната обвивка (shell).

### Къде отива връщаната стойност от main?

ОС, exit code на процеса.

## Преобразуване на низ в число

```c
int atoi(const char *str);
double atof(const char *str);
```

При неуспех връщат 0.

## Форматиране на съобщения към стандартния изход.

```c
int printf(const char *format, ...);
```

| низ | тип           | коментар                 |
| --- | ------------- | ------------------------ |
| %d  | int           | Десетична бройна система |
| %f  | double        | Плаваща запетая          |
| %s  | const char \* | Подниз                   |
| %p  | void \*       | Указател в 16-на.        |

Връща броя записани символи.

## Четене на форматирани съобщения от стандартния вход

```c
int scanf(const char *, ...);
```

Огледална на `printf`.

Връща броя обработени променливи.

## Типови преобразувания

### Кога се прави неявно преобразуване на типове?

1. Инициализация
2. Бинарни операции.

### Кои типове могат да бъдат преобразувани помежду си?

Които имат еднаква целочисленост или индиректност.

### Към кой тип се преобразуват аргументите на бинарна операция?

По-големия от двата.

### Към кой тип се преобразуват аргументите при инициализация на инициализирана променлива?

Типа на променливата.

### Какви типови преобразувания се извършват при извикване на функция?

Преобразува се типа на фактическите параметри към този на формалните.

### Как се прави явното преобразуване на типа на резултат от израз?

Префиксен оператор `()`

```c
( <тип> )<израз>
```
