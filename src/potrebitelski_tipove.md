# Потребителски типове

[Линк към презентацията](https://docs.google.com/presentation/d/1M-eoAy6ekCO5-rCt85GgT80-bSr13NZ6/edit?usp=sharing&ouid=101404069411555549635&rtpof=true&sd=true)

## Функции от стандартната библиотека за работа с динамична памет

### Кой управлява освобождаването на динамична памет?

Програмистът.

### Какви са параметрите на `malloc`?

Размера на блока памет, който искаме да заделим.

### Какви размери може да се заделят с динамична памет?

Всякакви – големи, малки, има всичко.

## Елементи на декларация

### Избройте формите на декларатор. _(7 на брой)_

- `<идентификатор>`
- `*<декларатор>`
- `*const <декларатор>`
- `<декларатор>[<размер>]`
- `<декларатор>(<формални параметри>)`
- `<поле>: <константен израз>`
- `(<декларатор>)`

### Избройте типовите спецификатори _(9 на брой)_

- `void`
- `char`
- `int`
- `float`
- `double`
- `struct`
- `union`
- `enum`
- `typedef`-име

### Избройте типовите модификатори _(5 на брой)_

- `const`
- `unsigned`
- `signed`
- `short`
- `long`

### Избройте класовете на съхранение. _(4 на брой)_

- `static`
- `extern`
- `typedef`
- `auto`

## Класове на съхранение

### Какво правят класовете на съхранение?

Променят времето на живот и заделянето на памет за даден идентификатор.

### Какво е действието на `typedef`?

Превръща идентификатора в име на типов спецификатор.

### В кое пространство на имена попадат идентификатори с клас на съхранение `typedef` ?

В пространството на имената на променливи.

## Типови спецификатори, деклариращи потребителски тип

### В коя част от декларация се дефинират потребителски типове?

В типовия спецификатор.

### Кои са ключовите думи за потребителски типове?

`struct`, `union`, `enum`

### Какво указва потребителски типов спецификатор без дефиниция?

Свързва идентификатора с типа.

## Типови спецификатори дефиниращи потребителски тип

### Кой типове са непълни?

Тези, които нямат дефиниция.

### Кои декларации могат да работят с непълен потребителски тип?

Които не изискват размера на типа да е известен – **декларация** на променливи и указатели.

### Колко дефиниции може да има потребителски тип?

Една.

### Какво е анонимен тип?

Тип, който няма име.

## Изброим тип

### На кой тип се базират изброимите типове?

`int`.

### Как се дефинира изброим тип?

```c
enum weekday { mon, tue, wed, thu, fri, sat, sun } today=sun;
```

### Каква е стойността на етикет на изброим тип при липса на явна инициализация?

С 1 по-голяма от предишния етикет, или 0, ако е първи.

### Може ли етикет от изброим тип да приема стойност на променлива или резултат от функция?

Не, трябва да е константен израз.

## Дефиниция на структура и обединение

### Кои потребителски типове са агрегатни?

Структура и обединение.

### Как се идентифицират членове на структура?

С име, принадлежащо на пространство на имената, специфично за структурата.

### Как се разполагат членовете на обединение в паметта?

С общ адрес, различни размери.

## Типов спецификатор за структура и обединение

### От какво се състои тялото на типов спецификатор за структура/обединение?

Блок с декларации на полета.

### Какъв вид декларации не може да има в структура и обединение?

С инициализатор.

### Как се инициализира структура?

Чрез блок със списък от инициализатори.

## Битови полета

### От какъв тип могат да са битовите полета?

Целочислен.

### Кога битови полета си поделят една дума?

Когато те са в съседни декларатори и се побират в една дума.

### Кога битови полета започват в нова дума?

Когато размера на полето не се побира в неизползваното място в предишната дума.

### Какво е анонимно битово поле и какво прави?

Битово поле, което няма име. То прескача толкова бита от думата.

### Какво прави битово поле с дължина 0 бита?

Прехвърля следващите битови полета на следващата дума.

## Непълен тип на масив в структура

### Какво е масив с непълен тип?

Масив с недефиниран размер.

### Как може да се дефинира масив с непълен тип в структура?

Приемайки, че структурата има поне 1 член освен масива, той може да се постави в края на тялото ѝ. Не може да има 2 масива от непълен тип в структура.

### Как се използва масив с непълен тип в структура?

Като се заделя динамична памет за структурата.

## Анонимна структура/обединение

### Какво е анонимна структура или обединение?

Вложена структура/обединение без декларатор.

### В кое пространството на имената влизат членовете на анонимна структура или обединение?

В пространството на имената на по-горната структура/обединение.

### Каква е целта на дефиниция на анонимна структура или обединение?

Намаляване на дълбочината членовете на структурата

## Оператори за достъп до членове на структура и обединение

### Кои са операторите за достъп до структура и какъв е видът им?

- постфискна `.`

```c
<израз>.<име на поле>
```

- постфискна `->`

```c
<израз>-><име на поле>
// еквивалентно на:
(*<израз>).<име на поле>
```

### Какъв е приоритетът на операторите за достъп до структура?

Най-висок.

## Инициализатори на агрегатни структури в С

### Какво е непозиционен инициализатор?

Инициализатор, който инициализира членовете на агрегатна структура в разбъркан ред.

### Какъв е вида на непозиционен инициализатор за масив?

```c
int a[5] = { [4]=3, [2]=5 };
```

### Какъв е вида на непозиционен инициализатор за структура?

```c
struct { int x, y, z; } point = { .y=2, .z=3 };
```

## Сложен литерал

### Какво прави сложен литерал?

Дава възможност за създаване и инициализиране на временна временна променлива в един израз.

### Какъв е видът на сложен литерал за масив?

```c
(int [3]){ 10, [2]=20 };
```

### Какъв е видът на сложен литерал за структура?

```c
(struct { int x, y, z; }) { .y=2, 3 };
```
